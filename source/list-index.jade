extend /default


block vars
    - var title = D.displayname
    - var photo = D.properties.photo.values ? D.properties.photo.values[0].file : null


block script
    script.
        $(function() {
            var position = $('h1').data('geo')

            if (position) {
                var map = new google.maps.Map(document.getElementById('map'), {
                    center: {
                        lat: parseFloat(position.split(',')[0]),
                        lng: parseFloat(position.split(',')[1]),
                    },
                    zoom: 11,
                    scrollwheel: false,
                    mapTypeControl: false,
                    streetViewControl: false,
                    rotateControl: false,
                    styles: [
                        {
                            'featureType': 'poi.business',
                            'stylers': [
                                {
                                    'visibility': 'off'
                                }
                            ]
                        },
                        {
                            'featureType': 'road',
                            'elementType': 'labels.icon',
                            'stylers': [
                                {
                                    'visibility': 'off'
                                }
                            ]
                        },
                        {
                            'featureType': 'transit',
                            'stylers': [
                                {
                                    'visibility': 'off'
                                }
                            ]
                        }
                    ]
                })

                var marker = new google.maps.Marker({
                    position: {
                        lat: parseFloat(position.split(',')[0]),
                        lng: parseFloat(position.split(',')[1]),
                    },
                    map: map
                })
            } else {
                $('#map-view').addClass('hidden')
            }
        })


block content
    h1(data-geo=D.properties.geo.values[0].value, data-info=D.displayinfo)= D.displayname

    .margin

    each p, idx in D.properties
        if p.values && ['path', 'photo', 'googleMaps', 'geo'].indexOf(idx) === -1
            h2= p.label
            each v in p.values
                != G.md(v.value)
